/*
 * Example Nextflow configuration for nf-slack plugin
 */

plugins {
    id 'nf-slack@0.1.0'
}

// Slack configuration
slack {
    // Enable the plugin
    enabled = true

    // Webhook URL - replace with your actual webhook URL
    // For security, consider using Nextflow secrets instead
    webhook = System.getenv('SLACK_WEBHOOK_URL')

    // Control automatic notifications
    notifyOnStart = true      // Send message when workflow starts
    notifyOnComplete = true   // Send message when workflow completes successfully
    notifyOnError = true      // Send message when workflow fails

    // Customize bot appearance
    username = 'Example Pipeline Bot'
    iconEmoji = ':test_tube:'

    // Control message content
    includeCommandLine = true
    includeResourceUsage = true

    // Option 1: Simple string customization (uncomment to use)
    // startMessage = 'üé¨ *Example workflow is starting!*'
    // completeMessage = 'üéâ *Example workflow completed successfully!*'
    // errorMessage = 'üí• *Example workflow encountered an error!*'

    // Option 2: Advanced map-based customization (full control)
    startMessage = [
        text: 'üöÄ *Example Pipeline Starting*',
        color: '#3AA3E3',
        includeFields: ['runName', 'status', 'commandLine'],
        customFields: [
            [title: 'Environment', value: 'Development', short: true],
            [title: 'Type', value: 'Example', short: true]
        ]
    ]

    completeMessage = [
        text: '‚úÖ *Example Pipeline Complete*',
        color: '#2EB887',
        includeFields: ['runName', 'duration', 'status', 'tasks'],
        customFields: [
            [title: 'Status Page', value: 'https://example.com/status', short: false]
        ]
    ]

    errorMessage = [
        text: '‚ùå *Example Pipeline Failed*',
        color: '#A30301',
        includeFields: ['runName', 'duration', 'errorMessage', 'failedProcess'],
        customFields: [
            [title: 'Support', value: 'support@example.com', short: true]
        ]
    ]
}
